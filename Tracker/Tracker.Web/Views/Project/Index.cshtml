@using System.Reflection
@using Tracker.DataLayer.Enumerations
@using Tracker.Web.Extensions
@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@

@model IEnumerable<ProjectViewModel>;
@{
    ViewData["Title"] = "Projects";
}

<h1>Welcome to the project Management</h1>

<br />
<div>
    <a asp-action="create" class="btn btn-primary" asp-controller="project">New Project</a>
</div>

<hr class="mt-2" />

<div>
    <table id="tbl_projects" class="table table-striped table-bordered dt-responsive nowrap" width="100%" cellspacing="0">
        <thead>
            <tr>
                <th>Name</th>
                <th>Start Date</th>
                <th>End Date</th>
                <th>Estimated Hours</th>
                <th>Contract Type</th>
                <th>Project Type</th>
                <th>Lifecycle Model</th>
                <th>Created Date</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>


    <!-- Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    ...
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                </div>
            </div>
        </div>
    </div>
</div>


@section  Scripts{
<script>
      $(document).ready(function() {
        $("#tbl_projects").DataTable({
            "processing": true, // for show progress bar
            "serverSide": true, // for process server side
            "filter": true, // this is for disable filter (search box)
            "orderMulti": false, // for disable multiple column at once
            "ajax": {
                "url": "/api/project/GetAllProject",
                "type": "POST",
                "datatype": "json"
            },
            "columnDefs": [{
                "targets": [8],
                "visible": true,
                "searchable": false,
                 "orderable": false
            }],
            "columns": [
                { "data": "name", "name": "Name", "autoWidth": true },
                { "data": "startDate", "name": "StartDate", "autoWidth": true },
                { "data": "endDate", "name": "EndDate", "autoWidth": true },
                { "data": "estimatedHours", "name": "EstimatedHours", "autoWidth": true },
                { "data": "contractTypeView", "name": "ContactType", "autoWidth": true },
                { "data": "projectTypeView", "name": "ProjectType", "autoWidth": true },
                { "data": "lifeCycleTypeView", "name": "LifeCycleModel", "autoWidth": true },
                { "data": "createdDate", "name": "CreatedDate", "autoWidth": true },
                {
                    "render": function(data, type, full, meta) { return '<a class="btn btn-warning" href="/project/get/' + full.id + '">View</a>'
                                     +'<a class="btn btn-info ml-6" href="/project/update/' + full.id + '">Edit</a>'
                                     +'<a class="btn btn-danger ml-6" href="/project/delete/' + full.id + '">Delete</a>'; }
                },
            ]

        });
    });
</script>
}